extends layout

block content
  .container-fluid.mx-4.my-4
    //- Issue Asset Header
    .row.mb-4
      .col-12
        h1.text-center.mb-4 Issue Asset

    //- Form to Issue Asset
    .row.mb-4
      .col-md-12
        .card.bg-light.border-primary.shadow-lg
          .card-body
            h5.card-title.text-primary Issue Asset to Employee
            form(action='/assets/issue/add' method='POST')
              .row
                .col-md-4.mb-3
                  .form-group
                    label(for='assetId') Asset
                    select.form-control(name='assetId' id='assetId' required)
                      option(value='') Select Asset
                      each asset in assets
                        option(value=asset.id)= `${asset.model} - ${asset.uniqueId}`
                .col-md-4.mb-3
                  .form-group
                    label(for='employeeId') Employee
                    select.form-control(name='employeeId' id='employeeId' required)
                      option(value='') Select Employee
                      each employee in employees
                        option(value=employee.id)= `${employee.employeeId} - ${employee.name}`
                .col-md-4.mb-3
                  .form-group
                    label(for='issueDate') Issue Date
                    input.form-control(type='date' id='issueDate' name='issueDate' required)
              .form-group.mt-3
                button.btn.btn-primary.btn-lg(type='submit') Issue Asset

    //- Issued Assets Table
    .row.mt-4
      .col-md-12
        .card.bg-light.border-primary.shadow-lg
          .card-body
            h5.card-title.text-primary Issued Assets
            .table-responsive
              table.table.table-striped.table-bordered#issuedAssetsTable
                thead.bg-primary.text-white
                  tr
                    th Asset
                    th Employee
                    th Issue Date
                tbody
                  each issue in issues
                    tr
                      td= issue.Asset ? `${issue.Asset.model} - ${issue.Asset.uniqueId}` : 'N/A'
                      td= issue.Employee ? `${issue.Employee.employeeId} - ${issue.Employee.name}` : 'N/A'
                      td= issue.issueDate ? new Date(issue.issueDate).toLocaleDateString() : 'N/A'

  //- Scripts
  script(src='https://code.jquery.com/jquery-3.5.1.min.js')
  script(src='https://cdn.datatables.net/1.10.21/js/jquery.dataTables.js')
  script(src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js')
  script.
    $(document).ready(function() {
      $('#issuedAssetsTable').DataTable();
    });
